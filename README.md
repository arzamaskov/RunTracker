# RunTracker

[![Build](https://github.com/arzamaskov/RunTracker/actions/workflows/ci.yml/badge.svg)](https://github.com/arzamaskov/RunTracker/actions)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](./LICENSE)
![Version](https://img.shields.io/github/v/release/arzamaskov/RunTracker?label=version)

–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É—á—ë—Ç–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –±–µ–≥–∞. –ì–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ –º–∞—Ä–∞—Ñ–æ–Ω—É –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ.

**–°–∞–π—Ç**: [runtracker.ru](https://runtracker.ru)

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: Laravel 12, PHP 8.4
- **Database**: PostgreSQL 16
- **Frontend**: Vite, Tailwind CSS 4
- **Package Manager**: pnpm
- **Containerization**: Docker, Docker Compose
- **Code Quality**: PHPStan, Laravel Pint, Deptrac

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—á–∏—Å—Ç—É—é –≥–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** –∏ **Domain-Driven Design (DDD)**:

```
src/
‚îú‚îÄ‚îÄ Identity/                   # Bounded Context: Identity
    ‚îú‚îÄ‚îÄ Domain/                 # –î–æ–º–µ–Ω–Ω—ã–π —Å–ª–æ–π (–Ω–µ –∑–∞–≤–∏—Å–∏—Ç –Ω–∏ –æ—Ç –∫–æ–≥–æ)
    ‚îÇ   ‚îú‚îÄ‚îÄ Entity/             # –°—É—â–Ω–æ—Å—Ç–∏
    ‚îÇ   ‚îú‚îÄ‚îÄ ValueObject/        # Value Objects
    ‚îÇ   ‚îú‚îÄ‚îÄ Factory/            # –§–∞–±—Ä–∏–∫–∏
    ‚îÇ   ‚îî‚îÄ‚îÄ Port/               # –ü–æ—Ä—Ç—ã (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)
    ‚îî‚îÄ‚îÄ Application/            # –°–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç Domain)
        ‚îî‚îÄ‚îÄ DTO/                # Data Transfer Objects

app/
‚îú‚îÄ‚îÄ Models/                     # Eloquent –º–æ–¥–µ–ª–∏ (Infrastructure)
‚îú‚îÄ‚îÄ Repositories/               # –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (Infrastructure)
‚îî‚îÄ‚îÄ Adapters/                   # –ê–¥–∞–ø—Ç–µ—Ä—ã –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

- **Domain** –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –Ω–∏ –æ—Ç –∫–æ–≥–æ
- **Application** –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç Domain
- **Infrastructure** –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Å–µ–≥–æ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–Ω—ã—Ö/–≤—ã—Ö–æ–¥–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤ (Ports & Adapters)

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- pnpm (–∏–ª–∏ Node.js —Å corepack)
- Git

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/arzamaskov/RunTracker
cd RunTracker
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –∑–∞–ø—É—Å–∫

```bash
make install
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç:
- –°–±–æ—Ä–∫—É Docker –æ–±—Ä–∞–∑–æ–≤
- –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –£—Å—Ç–∞–Ω–æ–≤–∫—É PHP –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Composer)
- –£—Å—Ç–∞–Ω–æ–≤–∫—É Node –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (pnpm)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–ª—é—á–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–ª–∏–Ω–∫–∞ –¥–ª—è storage
- –ù–∞—Å—Ç—Ä–æ–π–∫—É –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

### 3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Å –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ–º –ë–î)

```bash
make fresh-install
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Makefile. –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥:

```bash
make help
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

```bash
make up          # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
make down        # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
make restart     # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
make logs        # –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏
make shell       # –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PHP –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É
```

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
make artisan CMD="migrate"      # –í—ã–ø–æ–ª–Ω–∏—Ç—å Artisan –∫–æ–º–∞–Ω–¥—É
make migrate                    # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
make migrate-fresh              # –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
make pnpm-dev                   # –ó–∞–ø—É—Å—Ç–∏—Ç—å Vite –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
make tinker                     # –ó–∞–ø—É—Å—Ç–∏—Ç—å Tinker REPL
```

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

```bash
make lint       # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∏–ª—å –∫–æ–¥–∞ (Laravel Pint)
make stan       # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ (PHPStan)
make deptrac    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (Deptrac)
make ci         # –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ + —Ç–µ—Å—Ç—ã
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
make test                    # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
make test-coverage           # –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
make test-db-create          # –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –ë–î
make test-db-reset           # –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –ë–î
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
make psql                    # –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL
make backup-db               # –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –ë–î
make restore-db FILE=...     # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ë–î –∏–∑ –±—ç–∫–∞–ø–∞
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **PostgreSQL** —Å —Å—Ö–µ–º–æ–π `identity` –¥–ª—è –¥–æ–º–µ–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π:

- `identity.users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (UUID –∫–∞–∫ PK)
- `identity.sessions` - —Å–µ—Å—Å–∏–∏
- `identity.password_reset_tokens` - —Ç–æ–∫–µ–Ω—ã —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è
- `jobs`, `failed_jobs`, `job_batches` - –æ—á–µ—Ä–µ–¥–∏ (–≤ —Å—Ö–µ–º–µ `public`)
- `cache`, `cache_locks` - –∫–µ—à (–≤ —Å—Ö–µ–º–µ `public`)

### –ú–∏–≥—Ä–∞—Ü–∏–∏

```bash
make migrate                # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
make migrate-rollback       # –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é
make migrate-fresh          # –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î
make migrate-fresh-seed     # –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î —Å —Å–∏–¥–µ—Ä–∞–º–∏
```

## Frontend

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Vite** –∏ **Tailwind CSS 4** –¥–ª—è —Å–±–æ—Ä–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
make pnpm-dev      # –ó–∞–ø—É—Å—Ç–∏—Ç—å Vite dev server (HMR)
```

### Production —Å–±–æ—Ä–∫–∞

```bash
make pnpm-build    # –°–æ–±—Ä–∞—Ç—å production –≤–µ—Ä—Å–∏—é
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç PostgreSQL. –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Ç–µ—Å—Ç–æ–≤ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è –ë–î —Å–æ–∑–¥–∞–Ω–∞:

```bash
make test-db-reset    # –°–æ–∑–¥–∞—Ç—å/–ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –ë–î
make test             # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
```

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### PHP (Composer)

```bash
make composer-install    # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
make composer-update     # –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

### Node.js (pnpm)

```bash
make pnpm-install        # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞:

- **Laravel Pint** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (PSR-12)
- **PHPStan** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
- **Deptrac** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª

```bash
make ci    # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
```

## Docker

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Docker Compose –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

- **nginx** - –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
- **php-fpm** - PHP 8.4 —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏
- **postgres** - PostgreSQL 16
- **redis** - Redis 7.4
- **node** - Node.js 22 –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Vite)
- **mailpit** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ email

## –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∞

- PHP 8.4 –∏ –≤—ã—à–µ
- PSR-12 —Å—Ç–∞–Ω–¥–∞—Ä—Ç
- Laravel —Å—Ç–∞–Ω–¥–∞—Ä—Ç
- –í—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã ‚Äî –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏

## Git Workflow

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **trunk-based development**
- –§–æ—Ä–º–∞—Ç –∫–æ–º–º–∏—Ç–æ–≤: `<type>(<scope>): <–æ–ø–∏—Å–∞–Ω–∏–µ>`
- –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- –¢–∏–ø—ã: `feat`, `fix`, `refactor`, `chore`, `docs`, `test`, `build`, `ci`, `perf`, `revert`

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [Laravel Documentation](https://laravel.com/docs)
- [DDD –≤ PHP](https://github.com/dddinphp)
- [Hexagonal Architecture](https://alistair.cockburn.us/hexagonal-architecture/)

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
